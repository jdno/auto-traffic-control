syntax = "proto3";

package atc.v1;

import "atc/v1/airplane.proto";
import "atc/v1/location.proto";
import "atc/v1/node.proto";

message AirplaneCollided {
  string id1 = 1;
  string id2 = 2;
}

message AirplaneDetected {
  Airplane airplane = 1;
}

message AirplaneLanded {
  string id = 1;
}

message AirplaneMoved {
  string id = 1;
  Location location = 2;
}

message FlightPlanUpdated {
  string id = 1;
  repeated Node flight_plan = 2;
}

message GameStarted {}

message GameStopped {}

message StreamRequest {}

message StreamResponse {
  oneof event {
    AirplaneCollided airplane_collided = 1;
    AirplaneDetected airplane_detected = 2;
    AirplaneLanded airplane_landed = 3;
    AirplaneMoved airplane_moved = 4;
    FlightPlanUpdated flight_plan_updated = 5;
    GameStarted game_started = 6;
    GameStopped game_stopped = 7;
  }
}

service EventService {
  rpc Stream(StreamRequest) returns (stream StreamResponse) {}
}
